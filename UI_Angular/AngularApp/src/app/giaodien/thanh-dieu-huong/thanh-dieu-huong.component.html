<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" />
<header>
  <div class="logo">
    <a href="trang-chu"><img src="assets/logo.png" alt="Logo" /></a>
  </div>
  
  <div class="menu-toggle" (click)="toggleMenu()">
    <i class="bi bi-list"></i>
  </div>
  
  <nav [class.active]="isMenuActive">
    <a href="#">Trang Chủ</a>
    <a routerLink="/giaynam">Giày Nam</a>
    <a href="giaynu">Giày Nữ</a>
    <a href="khuyenmai">Khuyến Mãi</a>
    <a href="lien-he">Liên Hệ</a>
  </nav>
  
  <div class="icons">
    <div class="search-container">
      <input 
        type="text" 
        placeholder="Tìm kiếm..." 
        class="search-input" 
        [(ngModel)]="searchQuery"
        (keyup.enter)="performSearch()"
        [class.active]="isSearchActive"
      />
      <i class="bi bi-search" (click)="toggleSearch()"></i>
    </div>
    
    <div 
    class="cart-icon" 
    (mouseenter)="toggleCartPreview(true)" 
    (mouseleave)="toggleCartPreview(false)"
  >
    <a routerLink="/giohang">
      <i class="bi bi-bag"></i>
      <span *ngIf="totalQuantity > 0" class="badge">{{ totalQuantity }}</span>
    </a>

    <!-- Hiển thị preview giỏ hàng -->
    <div class="cart-preview" *ngIf="showCartPreview">
      <div *ngFor="let item of cartItems">
        <img [src]="item.image" width="30" />
        <span>{{ item.name }} x {{ item.quantity }}</span>
      </div>
    </div>
  </div>
    
    <a href="login" *ngIf="!isLoggedIn()"><i class="bi bi-person"></i></a>

    <div class="user-menu" *ngIf="isLoggedIn()">
      <div class="user-dropdown" (click)="toggleUserMenu()">
        <i class="bi bi-person"></i>
        <span>{{ getUsername() }}</span>
        <i class="bi bi-caret-down-fill"></i>
      </div>
      <div class="dropdown-content" [class.show]="isUserMenuOpen">
        <a routerLink="/thong-tin-khach-hang">Thông tin tài khoản</a>
        <a (click)="logout()">Đăng xuất</a>
      </div>
    </div>
  </div>
</header>
<div>
  <router-outlet></router-outlet>
</div>
<div>
  <app-footer></app-footer>
</div>